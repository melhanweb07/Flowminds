<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MindWell - Mental Health Support Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4a6fa5;
            --secondary: #6b8cbc;
            --accent: #ff6b6b;
            --light: #f8f9fa;
            --dark: #343a40;
            --success: #28a745;
            --warning: #ffc107;
            --info: #17a2b8;
            --border-radius: 10px;
            --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fb;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--box-shadow);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
            font-weight: 700;
        }
        
        .logo i {
            color: var(--accent);
        }
        
        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 5px 10px;
            border-radius: 5px;
            transition: background 0.3s;
        }
        
        nav a:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .auth-buttons {
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 16px;
            border-radius: var(--border-radius);
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .btn-primary {
            background-color: var(--accent);
            color: white;
        }
        
        .btn-outline {
            background-color: transparent;
            border: 2px solid white;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--box-shadow);
        }
        
        .hero {
            padding: 60px 0;
            text-align: center;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%234a6fa5" opacity="0.1"/><path d="M0 0L100 100" stroke="%234a6fa5" stroke-width="2" opacity="0.2"/></svg>');
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            color: var(--primary);
        }
        
        .hero p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 30px;
            color: var(--dark);
        }
        
        .features {
            padding: 60px 0;
            background-color: white;
        }
        
        .section-title {
            text-align: center;
            margin-bottom: 40px;
            color: var(--primary);
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .feature-card {
            background-color: var(--light);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--box-shadow);
            transition: transform 0.3s;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .feature-card h3 {
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .chat-container {
            background-color: var(--light);
            padding: 60px 0;
        }
        
        .chat-interface {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            overflow: hidden;
        }
        
        .chat-header {
            background-color: var(--primary);
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .chat-messages {
            height: 400px;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .message {
            max-width: 80%;
            padding: 12px 15px;
            border-radius: 20px;
        }
        
        .bot-message {
            background-color: #e6e6e6;
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }
        
        .user-message {
            background-color: var(--primary);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }
        
        .chat-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #ddd;
        }
        
        .chat-input input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 30px;
            outline: none;
        }
        
        .chat-input button {
            margin-left: 10px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 45px;
            height: 45px;
            cursor: pointer;
        }
        
        .resources {
            padding: 60px 0;
        }
        
        .resources-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
        }
        
        .resource-card {
            background-color: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--box-shadow);
        }
        
        .resource-img {
            height: 180px;
            background-color: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }
        
        .resource-content {
            padding: 20px;
        }
        
        .resource-content h3 {
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .appointment {
            background-color: var(--light);
            padding: 60px 0;
        }
        
        .appointment-form {
            max-width: 600px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            outline: none;
        }
        
        .privacy-note {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: var(--border-radius);
            margin: 20px 0;
            font-size: 0.9rem;
        }
        
        footer {
            background-color: var(--dark);
            color: white;
            padding: 40px 0;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
        }
        
        .footer-section h3 {
            margin-bottom: 20px;
            color: var(--accent);
        }
        
        .footer-section ul {
            list-style: none;
        }
        
        .footer-section li {
            margin-bottom: 10px;
        }
        
        .footer-section a {
            color: #ddd;
            text-decoration: none;
        }
        
        .footer-section a:hover {
            color: white;
        }
        
        .copyright {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #555;
        }
        
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1rem;
            }
        }
        
        /* Modal */
        .modal {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 200;
        }
        .modal.show { display: flex; }
        .modal-content {
            background: #fff;
            width: 100%;
            max-width: 420px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 24px;
        }
        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
        }
        .close-btn {
            background: transparent;
            border: none;
            color: #666;
            font-size: 1.2rem;
            cursor: pointer;
        }
        .modal .form-group { margin-bottom: 14px; }
        
        /* Counselor dashboard */
        #counselor-dashboard { display: none; padding: 60px 0; background: white; }
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .dashboard-card {
            background: var(--light);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 20px;
        }
        .dashboard-card h3 { color: var(--primary); margin-bottom: 10px; }
        .dashboard-list { list-style: none; display: grid; gap: 10px; }
        .dashboard-item { background: #fff; border: 1px solid #eee; border-radius: 8px; padding: 12px; }
        .muted { color: #666; font-size: 0.9rem; }
        
        /* Announcements */
        #announcements { padding: 60px 0; background: #fff; }
        .posts-list { display: grid; gap: 16px; }
        .post-card { background: var(--light); border-radius: var(--border-radius); box-shadow: var(--box-shadow); padding: 16px; }

        /* Student profile */
        #student-profile { display: none; padding: 60px 0; background: white; }
        .profile-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .profile-card { background: var(--light); border-radius: var(--border-radius); box-shadow: var(--box-shadow); padding: 20px; }
        .activity-list { list-style: none; display: grid; gap: 10px; margin-top: 10px; }
        .activity-item { background: #fff; border: 1px solid #eee; border-radius: 8px; padding: 12px; }

        /* Welcome Screen */
        #welcome-screen {
            position: fixed;
            inset: 0;
            z-index: 300;
            background: linear-gradient(135deg, rgba(74,111,165,0.9), rgba(34,197,94,0.85)), url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=1600&auto=format&fit=crop');
            background-size: cover;
            background-position: center;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #fff;
        }
        .welcome-card {
            max-width: 720px;
            background: rgba(255,255,255,0.12);
            backdrop-filter: blur(6px);
            border-radius: 16px;
            box-shadow: var(--box-shadow);
            padding: 28px;
            text-align: center;
        }
        .welcome-quote { font-size: 1.25rem; line-height: 1.8; margin: 16px 0; }
        .welcome-author { opacity: 0.9; font-size: 0.95rem; }

        /* Problem selection */
        #problems { padding: 60px 0; }
        .problem-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; }
        .problem-card { background: #fff; border-radius: 14px; box-shadow: var(--box-shadow); overflow: hidden; cursor: pointer; transition: transform 0.2s; }
        .problem-card:hover { transform: translateY(-4px); }
        .problem-image { height: 120px; background-size: cover; background-position: center; }
        .problem-body { padding: 16px; }
        .chipbar { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
        .chip { background: #eef2ff; color: #1e40af; border-radius: 20px; padding: 6px 12px; cursor: pointer; font-size: 0.85rem; }

        /* Problem detail */
        #problem-detail { display: none; padding: 60px 0; }
        .problem-header { display: flex; gap: 16px; align-items: center; margin-bottom: 16px; }
        .problem-banner { height: 160px; border-radius: 12px; background-size: cover; background-position: center; }
        .actions-row { display: flex; flex-wrap: wrap; gap: 10px; margin: 16px 0; }
        .btn-secondary { background: var(--secondary); color: #fff; }

        .modal .modal-actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 10px; }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <i class="fas fa-brain"></i>
                <span>MindWell</span>
            </div>
            <nav>
                <ul>
                    <li><a href="#features">Features</a></li>
                    <li><a href="#chat">Chat Support</a></li>
                    <li><a href="#resources">Resources</a></li>
                    <li><a href="#appointment">Book Appointment</a></li>
                </ul>
            </nav>
            <div class="auth-buttons">
                <button id="counselorLoginBtn" class="btn btn-outline">Counselor Login</button>
                <button id="counselorLogoutBtn" class="btn btn-primary" style="display:none;">Logout</button>
                <button id="studentLoginBtn" class="btn btn-outline">Student Login</button>
                <button id="studentProfileBtn" class="btn btn-primary" style="display:none;">My Profile</button>
                <button id="studentLogoutBtn" class="btn btn-outline" style="display:none;">Logout</button>
            </div>
        </div>
    </header>

    <!-- Welcome Entry Screen -->
    <div id="welcome-screen" aria-hidden="true">
        <div class="welcome-card">
            <h2 style="font-size:1.8rem;">Welcome to MindWell</h2>
            <p class="welcome-quote" id="welcomeQuote">“The only journey is the one within.”</p>
            <p class="welcome-author" id="welcomeAuthor">— Rainer Maria Rilke</p>
            <button id="enterAppBtn" class="btn btn-primary" style="margin-top:14px;">Enter</button>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
            <div class="modal-header">
                <h3 id="loginTitle" style="color: var(--primary);">Counselor Login</h3>
                <button class="close-btn" id="loginCloseBtn" aria-label="Close"><i class="fas fa-times"></i></button>
            </div>
            <form id="loginForm">
                <div class="form-group">
                    <label for="loginPassword">Name</label>
                    <input type="password" id="loginPassword" placeholder="Enter password" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Institution Name</label>
                    <input type="password" id="loginPassword" placeholder="Enter password" required>
                </div>
                <div class="form-group">
                    <label for="loginEmail">Email</label>
                    <input type="email" id="loginEmail" placeholder="counselor@mindwell.com" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter password" required>
                </div>
                <div class="form-group">
                    <label for="loginPassword">Confirm Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter password" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">Login</button>
                <p class="muted" style="margin-top:10px;">Demo credentials work with any non-empty values.</p>
            </form>
        </div>
    </div>

    <!-- Student Login Modal -->
    <div id="studentLoginModal" class="modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="studentLoginTitle">
            <div class="modal-header">
                <h3 id="studentLoginTitle" style="color: var(--primary);">Student Login</h3>
                <button class="close-btn" id="studentLoginCloseBtn" aria-label="Close"><i class="fas fa-times"></i></button>
            </div>
            <div class="form-group">
                <button id="googleSignInBtn" class="btn btn-primary" style="width:100%; display:flex; align-items:center; justify-content:center; gap:8px;">
                    <i class="fab fa-google"></i> Sign in with Google
                </button>
            </div>
            <div class="form-group">
                <button id="guestContinueBtn" class="btn btn-outline" style="width:100%; color: var(--primary); border-color: var(--primary);">Continue as Guest</button>
            </div>
            <p class="muted">Demo only. No real Google auth; data is stored locally.</p>
        </div>
    </div>

    <section class="hero">
        <div class="container">
            <h1>Your Mental Wellness Journey Starts Here</h1>
            <p>MindWell provides AI-powered emotional support, confidential counseling appointments, and educational resources to help you navigate life's challenges.</p>
            <button class="btn btn-primary">Get Started</button>
        </div>
    </section>

    <!-- Problem Selection -->
    <section id="problems">
        <div class="container">
            <h2 class="section-title">What are you facing today?</h2>
            <div class="problem-grid" id="problemGrid"></div>
        </div>
    </section>

    <!-- Announcements (public posts from counselors) -->
    <section id="announcements">
        <div class="container">
            <h2 class="section-title">Announcements from Counselors</h2>
            <div id="publicPosts" class="posts-list"></div>
        </div>
    </section>

    

    <!-- Problem Detail (dynamic) -->
    <section id="problem-detail">
        <div class="container">
            <div class="problem-header">
                <h2 id="problemTitle" class="section-title" style="margin:0;">Problem</h2>
            </div>
            <div id="problemBanner" class="problem-banner"></div>
            <p id="problemIntro" style="margin-top:12px;"></p>
            <div class="actions-row">
                <button id="openJournalBtn" class="btn btn-primary"><i class="fas fa-pen"></i> What are you thinking now?</button>
                <button id="openVideosBtn" class="btn btn-secondary"><i class="fas fa-video"></i> Watch guidance videos</button>
                <button id="openBookingBtn" class="btn btn-primary"><i class="fas fa-user-md"></i> Book counseling</button>
                <button id="backToProblemsBtn" class="btn btn-outline" style="border-color: var(--primary); color: var(--primary);"><i class="fas fa-arrow-left"></i> Back</button>
            </div>
            <div id="problemBooking" class="appointment-form" style="display:none; margin-top:16px;"></div>
        </div>
    </section>

    <!-- Journal Modal -->
    <div id="journalModal" class="modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="journalTitle">
            <div class="modal-header">
                <h3 id="journalTitle" style="color: var(--primary);">Journal</h3>
                <button class="close-btn" id="journalCloseBtn" aria-label="Close"><i class="fas fa-times"></i></button>
            </div>
            <div class="form-group">
                <label for="journalText">Write freely. This is just for you.</label>
                <textarea id="journalText" rows="6" placeholder="What's on your mind right now?"></textarea>
            </div>
            <div class="modal-actions">
                <button id="saveJournalBtn" class="btn btn-primary">Save</button>
                <button id="clearJournalBtn" class="btn btn-outline" style="border-color: var(--primary); color: var(--primary);">Clear</button>
            </div>
        </div>
    </div>

    <!-- Videos Modal -->
    <div id="videosModal" class="modal" aria-hidden="true">
        <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="videosTitle">
            <div class="modal-header">
                <h3 id="videosTitle" style="color: var(--primary);">Guidance Videos</h3>
                <button class="close-btn" id="videosCloseBtn" aria-label="Close"><i class="fas fa-times"></i></button>
            </div>
            <div id="videosList" class="posts-list"></div>
        </div>
    </div>

    <!-- Counselor Dashboard -->
    <section id="counselor-dashboard">
        <div class="container">
            <h2 class="section-title">Counselor Dashboard</h2>
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3>Create Announcement</h3>
                    <div class="form-group">
                        <label for="postTitle">Title</label>
                        <input type="text" id="postTitle" placeholder="Short title">
                    </div>
                    <div class="form-group">
                        <label for="postBody">Message</label>
                        <textarea id="postBody" rows="4" placeholder="Write an update, tip, or resource..."></textarea>
                    </div>
                    <button id="createPostBtn" class="btn btn-primary">Publish</button>
                </div>
                <div class="dashboard-card">
                    <h3>Student Requests</h3>
                    <ul id="requestsList" class="dashboard-list"></ul>
                    <p id="noRequests" class="muted">No requests yet.</p>
                </div>
            </div>
        </div>
    </section>
    <section class="features" id="features">
        <div class="container">
            <h2 class="section-title">Core Features</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h3>AI-Guided Emotional Support</h3>
                    <p>Chat with our empathetic AI assistant trained by mental health professionals to provide coping strategies and emotional support.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <h3>Confidential Appointments</h3>
                    <p>Book appointments with certified professionals while maintaining your privacy with our minimal data collection approach.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3>Multilingual Resources</h3>
                    <p>Access psychoeducational materials in multiple languages, tailored to your cultural background and needs.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Peer Support Network</h3>
                    <p>Connect with trained peer counselors and join moderated support forums for shared experiences and guidance.</p>
                </div>
            </div>
            <div class="chipbar" id="problemChips"></div>
        </div>
    </section>

    <!-- Student Profile -->
    <section id="student-profile">
        <div class="container">
            <h2 class="section-title">My Profile</h2>
            <div class="profile-grid">
                <div class="profile-card">
                    <h3>Profile Information</h3>
                    <div class="form-group">
                        <label for="studentName">Display Name</label>
                        <input type="text" id="studentName" placeholder="Your name or alias">
                    </div>
                    <div class="form-group">
                        <label for="studentInstitution">Institution (optional)</label>
                        <input type="text" id="studentInstitution" placeholder="School/College name">
                    </div>
                    <div class="form-group">
                        <label for="studentBio">About Me</label>
                        <textarea id="studentBio" rows="3" placeholder="A short note about your recovery journey..."></textarea>
                    </div>
                    <button id="saveStudentProfileBtn" class="btn btn-primary">Save Profile</button>
                    <p id="studentEmailLabel" class="muted" style="margin-top:8px;"></p>
                </div>
                <div class="profile-card">
                    <h3>Recovery Activities</h3>
                    <div class="form-group">
                        <label for="activityText">What did you work on?</label>
                        <textarea id="activityText" rows="3" placeholder="e.g., 10-minute breathing exercise, journaled emotions, therapy homework..."></textarea>
                    </div>
                    <button id="addActivityBtn" class="btn btn-primary">Add Activity</button>
                    <ul id="activityList" class="activity-list"></ul>
                    <p id="noActivities" class="muted">No activities yet. Start by adding one above.</p>
                </div>
            </div>
        </div>
    </section>

    <section class="chat-container" id="chat">
        <div class="container">
            <h2 class="section-title">AI Emotional Support Chat</h2>
            <div class="chat-interface">
                <div class="chat-header">
                    <i class="fas fa-robot"></i>
                    <h3>MindWell Assistant</h3>
                </div>
                <div class="chat-messages">
                    <div class="message bot-message">
                        Hello! I'm here to provide emotional support and coping strategies. How are you feeling today?
                    </div>
                </div>
                <div class="chat-input">
                    <input type="text" placeholder="Type your message here...">
                    <button><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
    </section>

    <section class="resources" id="resources">
        <div class="container">
            <h2 class="section-title">Mental Health Resources</h2>
            <div class="resources-grid">
                <div class="resource-card">
                    <div class="resource-img">
                        <i class="fas fa-video"></i>
                    </div>
                    <div class="resource-content">
                        <h3>Managing Anxiety</h3>
                        <p>Watch our curated videos on techniques to manage anxiety in daily life.</p>
                        <button class="btn btn-primary">View Resources</button>
                    </div>
                </div>
                <div class="resource-card">
                    <div class="resource-img">
                        <i class="fas fa-file-pdf"></i>
                    </div>
                    <div class="resource-content">
                        <h3>Stress Relief Guides</h3>
                        <p>Download our comprehensive guides on stress management techniques.</p>
                        <button class="btn btn-primary">Download</button>
                    </div>
                </div>
                <div class="resource-card">
                    <div class="resource-img">
                        <i class="fas fa-headphones"></i>
                    </div>
                    <div class="resource-content">
                        <h3>Guided Meditations</h3>
                        <p>Access our library of guided meditation sessions in multiple languages.</p>
                        <button class="btn btn-primary">Listen Now</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="appointment" id="appointment">
        <div class="container">
            <h2 class="section-title">Book a Confidential Appointment</h2>
            <div class="appointment-form">
                <form id="booking-form">
                    <div class="form-group">
                        <label for="name">Preferred Name</label>
                        <input type="text" id="name" placeholder="How would you like to be addressed?">
                    </div>
                    <div class="form-group">
                        <label for="concern">Primary Concern</label>
                        <select id="concern">
                            <option value="">Select what you'd like to discuss</option>
                            <option value="anxiety">Anxiety</option>
                            <option value="depression">Depression</option>
                            <option value="stress">Stress Management</option>
                            <option value="relationships">Relationship Issues</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="preference">Counselor Preference</label>
                        <select id="preference">
                            <option value="">No preference</option>
                            <option value="male">Male Counselor</option>
                            <option value="female">Female Counselor</option>
                            <option value="peer">Peer Counselor</option>
                            <option value="professional">Professional Therapist</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="availability">Preferred Availability</label>
                        <input type="date" id="availability">
                    </div>
                    <div class="privacy-note">
                        <i class="fas fa-shield-alt"></i> Your information is protected with end-to-end encryption. 
                        We collect minimal data and adhere to strict privacy protocols.
                    </div>
                    <button type="submit" class="btn btn-primary">Find Available Appointments</button>
                </form>
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>MindWell</h3>
                    <p>Providing accessible mental health support through technology and community.</p>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#features">Features</a></li>
                        <li><a href="#chat">Chat Support</a></li>
                        <li><a href="#resources">Resources</a></li>
                        <li><a href="#appointment">Book Appointment</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <ul>
                        <li><i class="fas fa-envelope"></i> support@mindwell.com</li>
                        <li><i class="fas fa-phone"></i> +1 (800) 123-HELP</li>
                        <li><i class="fas fa-map-marker-alt"></i> 123 Wellness Ave, Care City</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2023 MindWell. All rights reserved. | Privacy Policy | Terms of Service</p>
            </div>
        </div>
    </footer>

    <script>
        // Google Sheets integration script + Counselor/Student auth & data + Problem flow (client-side demo)
        document.addEventListener('DOMContentLoaded', function() {
            // ----- Auth state helpers -----
            const authKey = 'counselorAuth';
            const postsKey = 'counselorPosts';
            const apptKey = 'appointments';
            const studentKey = 'studentAuth';
            const studentProfileKey = 'studentProfile';
            const studentActivitiesKey = 'studentActivities';
            const journalKeyPrefix = 'journal_';
            const isAuthed = () => localStorage.getItem(authKey) === 'true';
            const setAuthed = (v) => localStorage.setItem(authKey, v ? 'true' : 'false');
            const isStudentAuthed = () => localStorage.getItem(studentKey) === 'true';
            const setStudentAuthed = (v) => localStorage.setItem(studentKey, v ? 'true' : 'false');

            // Header buttons
            const loginBtn = document.getElementById('counselorLoginBtn');
            const logoutBtn = document.getElementById('counselorLogoutBtn');
            const studentLoginBtn = document.getElementById('studentLoginBtn');
            const studentLogoutBtn = document.getElementById('studentLogoutBtn');
            const studentProfileBtn = document.getElementById('studentProfileBtn');

            // Modal elements
            const loginModal = document.getElementById('loginModal');
            const loginCloseBtn = document.getElementById('loginCloseBtn');
            const loginForm = document.getElementById('loginForm');
            const studentLoginModal = document.getElementById('studentLoginModal');
            const studentLoginCloseBtn = document.getElementById('studentLoginCloseBtn');
            const googleSignInBtn = document.getElementById('googleSignInBtn');
            const guestContinueBtn = document.getElementById('guestContinueBtn');

            // Dashboard elements
            const dashboard = document.getElementById('counselor-dashboard');
            const createPostBtn = document.getElementById('createPostBtn');
            const postTitle = document.getElementById('postTitle');
            const postBody = document.getElementById('postBody');
            const publicPosts = document.getElementById('publicPosts');
            const requestsList = document.getElementById('requestsList');
            const noRequests = document.getElementById('noRequests');
            
            // Student profile elements
            const studentProfileSection = document.getElementById('student-profile');
            const studentName = document.getElementById('studentName');
            const studentInstitution = document.getElementById('studentInstitution');
            const studentBio = document.getElementById('studentBio');
            const saveStudentProfileBtn = document.getElementById('saveStudentProfileBtn');
            const studentEmailLabel = document.getElementById('studentEmailLabel');
            const activityText = document.getElementById('activityText');
            const addActivityBtn = document.getElementById('addActivityBtn');
            const activityList = document.getElementById('activityList');
            const noActivities = document.getElementById('noActivities');

            // Welcome / Quotes
            const welcome = document.getElementById('welcome-screen');
            const enterAppBtn = document.getElementById('enterAppBtn');
            const welcomeQuote = document.getElementById('welcomeQuote');
            const welcomeAuthor = document.getElementById('welcomeAuthor');

            // Problem flow
            const problemGrid = document.getElementById('problemGrid');
            const problemChips = document.getElementById('problemChips');
            const problemDetail = document.getElementById('problem-detail');
            const problemTitle = document.getElementById('problemTitle');
            const problemBanner = document.getElementById('problemBanner');
            const problemIntro = document.getElementById('problemIntro');
            const backToProblemsBtn = document.getElementById('backToProblemsBtn');
            const openJournalBtn = document.getElementById('openJournalBtn');
            const openVideosBtn = document.getElementById('openVideosBtn');
            const openBookingBtn = document.getElementById('openBookingBtn');
            const problemBooking = document.getElementById('problemBooking');

            // Journal / Videos modals
            const journalModal = document.getElementById('journalModal');
            const journalCloseBtn = document.getElementById('journalCloseBtn');
            const journalText = document.getElementById('journalText');
            const saveJournalBtn = document.getElementById('saveJournalBtn');
            const clearJournalBtn = document.getElementById('clearJournalBtn');
            const videosModal = document.getElementById('videosModal');
            const videosCloseBtn = document.getElementById('videosCloseBtn');
            const videosList = document.getElementById('videosList');

            // Data
            const quotes = [
                { q: "You are not your thoughts.", a: "— Unknown" },
                { q: "This too shall pass.", a: "— Persian Proverb" },
                { q: "Every day is a second chance.", a: "— Unknown" },
                { q: "Small steps every day.", a: "— Unknown" }
            ];
            let quoteIdx = 0;
            function rotateQuote() {
                const item = quotes[quoteIdx % quotes.length];
                if (welcomeQuote) welcomeQuote.textContent = `“${item.q}”`;
                if (welcomeAuthor) welcomeAuthor.textContent = item.a;
                quoteIdx++;
            }
            setInterval(rotateQuote, 4500);
            rotateQuote();

            const problems = [
                { id: 'anxiety', name: 'Anxiety', intro: 'Grounding and breathing can help reduce anxious feelings.', image: 'https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?q=80&w=1200&auto=format&fit=crop', videos: [
                    { title: '5-4-3-2-1 Grounding', url: 'https://www.youtube.com/watch?v=30VMIEmA114' },
                    { title: 'Guided Breathing', url: 'https://www.youtube.com/watch?v=aC4zt3SGLw8' }
                ] },
                { id: 'depression', name: 'Depression', intro: 'Gentle activation and connection can lift mood over time.', image: 'https://images.unsplash.com/photo-1500534314209-a25ddb2bd429?q=80&w=1200&auto=format&fit=crop', videos: [
                    { title: 'Behavioral Activation', url: 'https://www.youtube.com/watch?v=V0Q4dB7Y4mQ' },
                    { title: 'Self-compassion', url: 'https://www.youtube.com/watch?v=-kfUE41-JFw' }
                ] },
                { id: 'stress', name: 'Stress', intro: 'Release tension and restore balance with short practices.', image: 'https://images.unsplash.com/photo-1506126613408-eca07ce68773?q=80&w=1200&auto=format&fit=crop', videos: [
                    { title: '3-minute Reset', url: 'https://www.youtube.com/watch?v=SEfs5TJZ6Nk' },
                    { title: 'Progressive Relaxation', url: 'https://www.youtube.com/watch?v=86HUcX8ZtAk' }
                ] },
                { id: 'relationships', name: 'Relationships', intro: 'Communication skills can help you navigate conflict and care.', image: 'https://images.unsplash.com/photo-1500534311514-6b07a9d7a3f1?q=80&w=1200&auto=format&fit=crop', videos: [
                    { title: 'I-Statements', url: 'https://www.youtube.com/watch?v=w4xe7tA5pZc' },
                    { title: 'Active Listening', url: 'https://www.youtube.com/watch?v=Hf8l0t-1MzE' }
                ] },
                { id: 'other', name: 'Other', intro: 'Let’s explore what you need right now.', image: 'https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?q=80&w=1200&auto=format&fit=crop', videos: [
                    { title: 'Mindfulness basics', url: 'https://www.youtube.com/watch?v=ZToicYcHIOU' }
                ] }
            ];

            function renderProblems() {
                if (problemGrid) {
                    problemGrid.innerHTML = '';
                    problems.forEach(p => {
                        const card = document.createElement('div');
                        card.className = 'problem-card';
                        card.innerHTML = `<div class=\"problem-image\" style=\"background-image:url('${p.image}')\"></div><div class=\"problem-body\"><h3 style=\"color:var(--primary);\">${p.name}</h3><p class=\"muted\">${p.intro}</p></div>`;
                        card.addEventListener('click', () => navigateToProblem(p.id));
                        problemGrid.appendChild(card);
                    });
                }
                if (problemChips) {
                    problemChips.innerHTML = '';
                    problems.forEach(p => {
                        const chip = document.createElement('div');
                        chip.className = 'chip';
                        chip.textContent = p.name;
                        chip.addEventListener('click', () => navigateToProblem(p.id));
                        problemChips.appendChild(chip);
                    });
                }
            }

            function showSection(id) {
                const ids = ['announcements','features','counselor-dashboard','chat','resources','appointment','student-profile','problems','problem-detail'];
                ids.forEach(sec => {
                    const el = document.getElementById(sec);
                    if (!el) return;
                    el.style.display = (sec === id) ? 'block' : (sec === 'counselor-dashboard' ? (isAuthed() ? 'block' : 'none') : (sec === 'student-profile' ? (isStudentAuthed() ? 'block' : 'none') : ''));
                });
            }

            function navigateToProblem(problemId) {
                const p = problems.find(x => x.id === problemId) || problems[0];
                if (problemTitle) problemTitle.textContent = p.name;
                if (problemIntro) problemIntro.textContent = p.intro;
                if (problemBanner) problemBanner.style.backgroundImage = `url('${p.image}')`;
                renderProblemBooking(p);
                const saved = localStorage.getItem(journalKeyPrefix + p.id) || '';
                if (journalText) journalText.value = saved;
                showSection('problem-detail');
                location.hash = `#problem/${p.id}`;
            }

            function renderProblemBooking(p) {
                if (!problemBooking) return;
                problemBooking.style.display = 'none';
                problemBooking.innerHTML = `
                    <form id=\"problemBookingForm\">
                        <div class=\"form-group\">
                            <label for=\"pb_name\">Preferred Name</label>
                            <input type=\"text\" id=\"pb_name\" placeholder=\"Your name\">
                        </div>
                        <div class=\"form-group\">
                            <label for=\"pb_counselor\">Choose Counselor</label>
                            <select id=\"pb_counselor\">
                                <option value=\"\">Any available</option>
                                <option value=\"Alice\">Alice (Therapist)</option>
                                <option value=\"Ben\">Ben (Peer Counselor)</option>
                                <option value=\"Chitra\">Chitra (Therapist)</option>
                            </select>
                        </div>
                        <div class=\"form-group\">
                            <label for=\"pb_date\">Preferred Date</label>
                            <input type=\"date\" id=\"pb_date\">
                        </div>
                        <div class=\"form-group\">
                            <label>Concern</label>
                            <input type=\"text\" id=\"pb_concern\" value=\"${p.name}\" readonly>
                        </div>
                        <button type=\"submit\" class=\"btn btn-primary\">Request Appointment</button>
                    </form>
                `;
                const form = problemBooking.querySelector('#problemBookingForm');
                form.addEventListener('submit', (e) => {
                    e.preventDefault();
                    const data = {
                        name: problemBooking.querySelector('#pb_name').value,
                        concern: problemBooking.querySelector('#pb_concern').value,
                        preference: problemBooking.querySelector('#pb_counselor').value,
                        availability: problemBooking.querySelector('#pb_date').value,
                        timestamp: new Date().toISOString()
                    };
                    const list = getAppointments();
                    list.push(data);
                    setAppointments(list);
                    alert('Appointment request submitted. We will contact you soon.');
                    renderAppointments();
                });
            }

            backToProblemsBtn && backToProblemsBtn.addEventListener('click', () => {
                history.pushState({}, '', '#problems');
                showSection('problems');
            });
            openBookingBtn && openBookingBtn.addEventListener('click', () => {
                if (problemBooking) problemBooking.style.display = problemBooking.style.display === 'none' ? 'block' : 'none';
            });

            // Journal modal
            function openJournal() { journalModal.classList.add('show'); journalModal.setAttribute('aria-hidden','false'); }
            function closeJournal() { journalModal.classList.remove('show'); journalModal.setAttribute('aria-hidden','true'); }
            openJournalBtn && openJournalBtn.addEventListener('click', openJournal);
            journalCloseBtn && journalCloseBtn.addEventListener('click', closeJournal);
            journalModal && journalModal.addEventListener('click', (e) => { if (e.target === journalModal) closeJournal(); });
            saveJournalBtn && saveJournalBtn.addEventListener('click', () => {
                const pid = location.hash.startsWith('#problem/') ? location.hash.split('/')[1] : 'anxiety';
                localStorage.setItem(journalKeyPrefix + pid, journalText.value || '');
                alert('Saved');
                closeJournal();
            });
            clearJournalBtn && clearJournalBtn.addEventListener('click', () => { journalText.value = ''; });

            // Videos modal
            function openVideos() { videosModal.classList.add('show'); videosModal.setAttribute('aria-hidden','false'); }
            function closeVideos() { videosModal.classList.remove('show'); videosModal.setAttribute('aria-hidden','true'); }
            openVideosBtn && openVideosBtn.addEventListener('click', () => {
                const pid = location.hash.startsWith('#problem/') ? location.hash.split('/')[1] : 'anxiety';
                const p = problems.find(x => x.id === pid) || problems[0];
                videosList.innerHTML = '';
                p.videos.forEach(v => {
                    const card = document.createElement('div');
                    card.className = 'post-card';
                    card.innerHTML = `<h4 style=\"color:var(--primary); margin-bottom:6px;\">${v.title}</h4><a href=\"${v.url}\" target=\"_blank\" rel=\"noopener\" class=\"btn btn-outline\" style=\"border-color:var(--primary); color:var(--primary); display:inline-block; margin-top:6px;\">Open on YouTube</a>`;
                    videosList.appendChild(card);
                });
                openVideos();
            });
            videosCloseBtn && videosCloseBtn.addEventListener('click', closeVideos);
            videosModal && videosModal.addEventListener('click', (e) => { if (e.target === videosModal) closeVideos(); });

            // Welcome enter
            enterAppBtn && enterAppBtn.addEventListener('click', () => {
                if (welcome) welcome.style.display = 'none';
                showSection('problems');
                const p = document.getElementById('problems');
                if (p) p.scrollIntoView({ behavior: 'smooth' });
            });

            // Hash routing
            function handleHash() {
                if (location.hash.startsWith('#problem/')) {
                    const id = location.hash.split('/')[1];
                    navigateToProblem(id);
                } else if (location.hash === '#problems') {
                    showSection('problems');
                }
            }
            window.addEventListener('hashchange', handleHash);

            function toggleUI() {
                const authed = isAuthed();
                const sAuthed = isStudentAuthed();
                if (loginBtn) loginBtn.style.display = authed ? 'none' : '';
                if (logoutBtn) logoutBtn.style.display = authed ? '' : 'none';
                if (dashboard) dashboard.style.display = authed ? 'block' : 'none';
                if (studentLoginBtn) studentLoginBtn.style.display = sAuthed ? 'none' : '';
                if (studentLogoutBtn) studentLogoutBtn.style.display = sAuthed ? '' : 'none';
                if (studentProfileBtn) studentProfileBtn.style.display = sAuthed ? '' : 'none';
                if (studentProfileSection) studentProfileSection.style.display = sAuthed ? 'block' : 'none';
            }

            function openModal() { loginModal.classList.add('show'); loginModal.setAttribute('aria-hidden', 'false'); }
            function closeModal() { loginModal.classList.remove('show'); loginModal.setAttribute('aria-hidden', 'true'); }
            function openStudentModal() { studentLoginModal.classList.add('show'); studentLoginModal.setAttribute('aria-hidden', 'false'); }
            function closeStudentModal() { studentLoginModal.classList.remove('show'); studentLoginModal.setAttribute('aria-hidden', 'true'); }

            loginBtn && loginBtn.addEventListener('click', openModal);
            loginCloseBtn && loginCloseBtn.addEventListener('click', closeModal);
            loginModal && loginModal.addEventListener('click', (e) => { if (e.target === loginModal) closeModal(); });

            logoutBtn && logoutBtn.addEventListener('click', () => {
                setAuthed(false);
                toggleUI();
            });

            loginForm && loginForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value.trim();
                const pwd = document.getElementById('loginPassword').value.trim();
                if (!email || !pwd) { alert('Please enter email and password'); return; }
                // Demo: accept any non-empty credentials
                setAuthed(true);
                closeModal();
                toggleUI();
            });

            // ----- Student auth -----
            studentLoginBtn && studentLoginBtn.addEventListener('click', openStudentModal);
            studentLoginCloseBtn && studentLoginCloseBtn.addEventListener('click', closeStudentModal);
            studentLoginModal && studentLoginModal.addEventListener('click', (e) => { if (e.target === studentLoginModal) closeStudentModal(); });
            googleSignInBtn && googleSignInBtn.addEventListener('click', () => {
                localStorage.setItem(studentProfileKey, JSON.stringify({ email: 'student@example.com' }));
                setStudentAuthed(true);
                closeStudentModal();
                loadStudentProfileFromStorage();
                toggleUI();
            });
            guestContinueBtn && guestContinueBtn.addEventListener('click', () => {
                localStorage.setItem(studentProfileKey, JSON.stringify({ email: '', name: 'Guest' }));
                setStudentAuthed(true);
                closeStudentModal();
                loadStudentProfileFromStorage();
                toggleUI();
            });
            studentLogoutBtn && studentLogoutBtn.addEventListener('click', () => {
                setStudentAuthed(false);
                toggleUI();
            });
            studentProfileBtn && studentProfileBtn.addEventListener('click', () => {
                const el = document.getElementById('student-profile');
                if (el) el.scrollIntoView({ behavior: 'smooth' });
            });

            // ----- Posts rendering -----
            function getPosts() {
                try { return JSON.parse(localStorage.getItem(postsKey)) || []; } catch { return []; }
            }
            function setPosts(posts) { localStorage.setItem(postsKey, JSON.stringify(posts)); }
            function renderPublicPosts() {
                if (!publicPosts) return;
                const posts = getPosts().slice().reverse();
                publicPosts.innerHTML = '';
                if (posts.length === 0) {
                    const empty = document.createElement('p');
                    empty.className = 'muted';
                    empty.textContent = 'No announcements yet.';
                    publicPosts.appendChild(empty);
                    return;
                }
                posts.forEach(p => {
                    const card = document.createElement('div');
                    card.className = 'post-card';
                    const title = document.createElement('h3');
                    title.style.color = 'var(--primary)';
                    title.textContent = p.title || 'Untitled';
                    const body = document.createElement('p');
                    body.textContent = p.body || '';
                    const meta = document.createElement('div');
                    meta.className = 'muted';
                    meta.textContent = new Date(p.createdAt).toLocaleString();
                    card.appendChild(title);
                    card.appendChild(body);
                    card.appendChild(meta);
                    publicPosts.appendChild(card);
                });
            }

            createPostBtn && createPostBtn.addEventListener('click', () => {
                const title = postTitle.value.trim();
                const body = postBody.value.trim();
                if (!title && !body) { alert('Write something to publish.'); return; }
                const posts = getPosts();
                posts.push({ title, body, createdAt: new Date().toISOString() });
                setPosts(posts);
                postTitle.value = '';
                postBody.value = '';
                renderPublicPosts();
                alert('Announcement published');
            });

            // ----- Appointments rendering -----
            function getAppointments() {
                try { return JSON.parse(localStorage.getItem(apptKey)) || []; } catch { return []; }
            }
            function setAppointments(list) { localStorage.setItem(apptKey, JSON.stringify(list)); }
            function renderAppointments() {
                if (!requestsList || !noRequests) return;
                const items = getAppointments().slice().reverse();
                requestsList.innerHTML = '';
                if (items.length === 0) {
                    noRequests.style.display = '';
                    return;
                }
                noRequests.style.display = 'none';
                items.forEach(a => {
                    const li = document.createElement('li');
                    li.className = 'dashboard-item';
                    li.innerHTML = `<strong>${a.name || 'Anonymous'}</strong> · <span class="muted">${a.concern || 'General'}</span><br><span class="muted">Pref: ${a.preference || 'None'} · Date: ${a.availability || '—'}</span>`;
                    requestsList.appendChild(li);
                });
            }

            // ----- Student profile & activities -----
            function getStudentProfile() {
                try { return JSON.parse(localStorage.getItem(studentProfileKey)) || {}; } catch { return {}; }
            }
            function setStudentProfile(p) { localStorage.setItem(studentProfileKey, JSON.stringify(p)); }
            function getStudentActivities() {
                try { return JSON.parse(localStorage.getItem(studentActivitiesKey)) || []; } catch { return []; }
            }
            function setStudentActivities(list) { localStorage.setItem(studentActivitiesKey, JSON.stringify(list)); }
            function loadStudentProfileFromStorage() {
                const p = getStudentProfile();
                if (studentName && typeof p.name === 'string') studentName.value = p.name;
                if (studentInstitution && typeof p.institution === 'string') studentInstitution.value = p.institution;
                if (studentBio && typeof p.bio === 'string') studentBio.value = p.bio;
                if (studentEmailLabel) studentEmailLabel.textContent = p.email ? `Signed in as ${p.email}` : 'Guest mode';
                renderActivities();
            }
            saveStudentProfileBtn && saveStudentProfileBtn.addEventListener('click', () => {
                const profile = getStudentProfile();
                profile.name = (studentName && studentName.value.trim()) || profile.name || '';
                profile.institution = (studentInstitution && studentInstitution.value.trim()) || profile.institution || '';
                profile.bio = (studentBio && studentBio.value.trim()) || profile.bio || '';
                setStudentProfile(profile);
                alert('Profile saved');
                loadStudentProfileFromStorage();
            });
            function renderActivities() {
                if (!activityList || !noActivities) return;
                const items = getStudentActivities().slice().reverse();
                activityList.innerHTML = '';
                if (items.length === 0) { noActivities.style.display = ''; return; }
                noActivities.style.display = 'none';
                items.forEach(a => {
                    const li = document.createElement('li');
                    li.className = 'activity-item';
                    li.innerHTML = `<strong>${a.title}</strong><br><span class="muted">${new Date(a.createdAt).toLocaleString()}</span><br>${a.note || ''}`;
                    activityList.appendChild(li);
                });
            }
            addActivityBtn && addActivityBtn.addEventListener('click', () => {
                const text = (activityText && activityText.value.trim()) || '';
                if (!text) { alert('Please describe the activity.'); return; }
                const list = getStudentActivities();
                list.push({ title: text.length > 60 ? text.slice(0, 60) + '…' : text, note: text, createdAt: new Date().toISOString() });
                setStudentActivities(list);
                activityText.value = '';
                renderActivities();
            });

            // Form submission handler
            const bookingForm = document.getElementById('booking-form');
            if (bookingForm) {
                bookingForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Collect form data
                    const formData = {
                        name: document.getElementById('name').value,
                        concern: document.getElementById('concern').value,
                        preference: document.getElementById('preference').value,
                        availability: document.getElementById('availability').value,
                        timestamp: new Date().toISOString()
                    };
                    
                    // In a real implementation, this would send data to Google Sheets
                    // For this prototype, we'll simulate the process and store locally
                    simulateGoogleSheetsSubmit(formData);
                });
            }
            
            // Chat functionality
            const chatInput = document.querySelector('.chat-input input');
            const chatSendBtn = document.querySelector('.chat-input button');
            const chatMessages = document.querySelector('.chat-messages');
            
            if (chatSendBtn) {
                chatSendBtn.addEventListener('click', sendMessage);
            }
            
            if (chatInput) {
                chatInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });
            }
            
            function sendMessage() {
                const message = chatInput.value.trim();
                if (message) {
                    // Add user message
                    addMessageToChat(message, 'user');
                    chatInput.value = '';
                    
                    // Simulate AI response after a short delay
                    setTimeout(() => {
                        const aiResponse = generateAIResponse(message);
                        addMessageToChat(aiResponse, 'bot');
                        const lowerMessage = message.toLowerCase();
                        const match = ['anxiety','depression','stress','relationships','other'].find(k => lowerMessage.includes(k));
                        if (match) navigateToProblem(match);
                    }, 1000);
                }
            }
            
            function addMessageToChat(message, sender) {
                const messageEl = document.createElement('div');
                messageEl.classList.add('message');
                messageEl.classList.add(sender === 'user' ? 'user-message' : 'bot-message');
                messageEl.textContent = message;
                
                chatMessages.appendChild(messageEl);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            function generateAIResponse(userMessage) {
                // Simple response logic - in a real implementation, this would connect to an AI service
                const lowerMessage = userMessage.toLowerCase();
                
                if (lowerMessage.includes('anxious') || lowerMessage.includes('anxiety')) {
                    return "I understand you're feeling anxious. Try this breathing exercise: inhale for 4 seconds, hold for 4, exhale for 6. Repeat 5 times.";
                } else if (lowerMessage.includes('sad') || lowerMessage.includes('depress')) {
                    return "I'm sorry you're feeling this way. Remember that emotions are temporary. Would you like to try a quick mindfulness exercise?";
                } else if (lowerMessage.includes('stress') || lowerMessage.includes('stressed')) {
                    return "Stress can be challenging. Let me share a 3-minute guided meditation that might help. Would you like to try it?";
                } else if (lowerMessage.includes('happy') || lowerMessage.includes('good')) {
                    return "I'm glad you're feeling positive! Celebrating good moments is important. Would you like to journal about what's making you feel good?";
                } else {
                    return "Thank you for sharing. I'm here to support you. Would you like to talk more about what you're experiencing, or try a coping exercise?";
                }
            }
            
            function simulateGoogleSheetsSubmit(data) {
                // In a real implementation, this would use the Google Sheets API
                console.log('Submitting to Google Sheets:', data);
                // Store locally for counselor view
                const list = getAppointments();
                list.push(data);
                setAppointments(list);
                renderAppointments();
                // Show success message
                alert('Your appointment request has been received! We will contact you with available options soon.');
                bookingForm.reset();
            }

            // Initial UI render
            toggleUI();
            renderPublicPosts();
            renderAppointments();
            loadStudentProfileFromStorage();
            // Show welcome on first load
            const hasSeenWelcome = localStorage.getItem('seenWelcome') === 'true';
            const welcomeEl = document.getElementById('welcome-screen');
            if (welcomeEl && !hasSeenWelcome) { welcomeEl.style.display = 'flex'; }
            enterAppBtn && enterAppBtn.addEventListener('click', () => { localStorage.setItem('seenWelcome','true'); });
            renderProblems();
            handleHash();
        });
    </script>
</body>
</html>